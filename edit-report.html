<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تعديل التقرير - Laapak Reports</title>
    <link rel="icon" type="image/png" href="img/cropped-Logo-mark.png.png">
    <link rel="shortcut icon" type="image/png" href="img/cropped-Logo-mark.png.png">
    
    <!-- Bootstrap RTL CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/form-steps.css">
    <link rel="stylesheet" href="css/custom-admin.css">
    
    <!-- PWA manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- iOS PWA support -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Laapak Reports">
    <link rel="apple-touch-icon" href="img/cropped-Logo-mark.png.png">
    
    <!-- Theme color for browser -->
    <meta name="theme-color" content="#0a3622">
    
    <style>
        /* Custom utility class for smaller font size on mobile */
        .fs-sm-6 {
            font-size: 0.875rem;
        }
        
        /* Client search styles */
        .client-result-item {
            transition: all 0.2s ease;
        }
        
        .client-result-item:hover {
            background-color: #f8f9fa !important;
            transform: translateX(-2px);
        }
        
        .client-result-item:last-child {
            border-bottom: none !important;
        }
        
        #clientSearchResults {
            scrollbar-width: thin;
            scrollbar-color: #007553 #f1f1f1;
        }
        
        #clientSearchResults::-webkit-scrollbar {
            width: 6px;
        }
        
        #clientSearchResults::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }
        
        #clientSearchResults::-webkit-scrollbar-thumb {
            background: #007553;
            border-radius: 3px;
        }
        
        #clientSearchResults::-webkit-scrollbar-thumb:hover {
            background: #005a40;
        }
        
        @media (max-width: 767.98px) {
            .fs-sm-6 {
                font-size: 0.75rem;
            }
            
            /* Smaller nav icons on mobile */
            .nav-item .nav-link.rounded-circle {
                width: 32px !important;
                height: 32px !important;
                padding: 0 !important;
            }
            
            /* Reduce horizontal spacing on mobile */
            .navbar-nav .nav-item {
                margin-left: 2px !important;
                margin-right: 2px !important;
            }
        }
    </style>
    
    <!-- Enhanced UI Styles -->
    <style>
        :root {
            --primary-color: #007553;
            --primary-hover: #005a40;
            --secondary-color: #6c757d;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --info-color: #17a2b8;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --border-radius: 12px;
            --card-radius: 16px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        body {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        /* Button Enhancements */
        .btn {
            border-radius: var(--border-radius) !important;
            font-weight: 500 !important;
            transition: var(--transition) !important;
            border: none !important;
            padding: 0.75rem 1.5rem !important;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #007553 0%, #005a40 100%) !important;
            border: none !important;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #005a40 0%, #004030 100%) !important;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #0eaf54 0%, #088f44 100%) !important;
            border: none !important;
        }
        
        .btn-success:hover {
            background: linear-gradient(135deg, #088f44 0%, #077539 100%) !important;
            transform: translateY(-2px);
        }
        
        .btn-outline-primary, .btn-outline-success, .btn-outline-info, .btn-outline-secondary {
            border-width: 1.5px !important;
        }
        
        .btn-outline-primary:hover, .btn-outline-success:hover, .btn-outline-info:hover, .btn-outline-secondary:hover {
            transform: translateY(-2px);
        }
        
        /* Client Card */
        .client-card {
            border-radius: var(--card-radius) !important;
            transition: var(--transition);
            border: 1px solid rgba(0, 0, 0, 0.05) !important;
        }
        
        .client-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1) !important;
        }
        
        /* Tables */
        .table {
            border-radius: var(--border-radius) !important;
            overflow: hidden;
        }
        
        .table th {
            background-color: rgba(248, 249, 250, 0.7) !important;
            font-weight: 600 !important;
            color: var(--secondary-color) !important;
        }
        
        /* Badge Styles */
        .badge {
            padding: 0.5em 0.85em !important;
            border-radius: 6px !important;
            font-weight: 500 !important;
        }
        
        /* Form Steps Indicators */
        .form-steps-indicator .step {
            border-radius: 50% !important;
            transition: var(--transition);
        }
        
        .form-steps-indicator .step.active {
            background-color: var(--primary-color) !important;
            transform: scale(1.1);
        }
        
        /* Custom Component Cards */
        .component-test-card {
            transition: var(--transition);
        }
        
        .component-test-card:hover {
            transform: translateY(-3px);
        }
        
        /* Form Check */
        .form-check-input {
            cursor: pointer;
            width: 1.2em !important;
            height: 1.2em !important;
        }
        
        .form-check-input:checked {
            background-color: var(--primary-color) !important;
            border-color: var(--primary-color) !important;
        }
        
        /* Modal */
        .modal-content {
            border-radius: var(--card-radius) !important;
            border: none !important;
            overflow: hidden;
        }
        
        .modal-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-hover) 100%) !important;
            color: white !important;
            border-bottom: none !important;
        }
        
        .modal-header .btn-close {
            filter: brightness(0) invert(1);
        }
        
        /* Test Type Cards */
        .test-type-card {
            cursor: pointer;
            transition: var(--transition);
            border-radius: var(--card-radius) !important;
        }
        
        .test-type-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1) !important;
        }
        
        .test-type-card.selected {
            border: 2px solid var(--primary-color) !important;
            background-color: rgba(14, 175, 84, 0.05) !important;
        }
        
        .icon-circle {
            width: 60px;
            height: 60px;
            border-radius: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .icon-circle i {
            font-size: 1.5rem;
        }
        
        /* Alert styling */
        .alert {
            border-radius: var(--border-radius) !important;
        }
        
        /* Shadows and depths */
        .shadow-sm {
            box-shadow: 0 0.25rem 0.75rem rgba(0, 0, 0, 0.05) !important;
        }
        
        /* Edit mode specific styles */
        .edit-mode-indicator {
            background: linear-gradient(135deg, #ffc107 0%, #ff8c00 100%);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
            text-align: center;
            font-weight: 600;
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- Offline Alert -->
    <div class="offline-alert" id="offlineAlert">
        أنت حاليًا في وضع عدم الاتصال. سيتم حفظ التغييرات محليًا حتى استعادة الاتصال.
    </div>

    <!-- Header Container - will be populated by header-component.js -->
    <div id="header-container"></div>
    
    <!-- Main Content -->
    <div class="container-fluid p-4 mt-3">
        <!-- Edit Mode Indicator -->
        <div class="edit-mode-indicator">
            <i class="fas fa-edit me-2"></i>
            وضع التعديل - تعديل التقرير
        </div>
        
        <!-- Report Edit Header -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h2 class="mb-1" style="color: var(--primary-color); font-weight: 700;">
                            <i class="fas fa-edit me-2"></i>تعديل التقرير
                        </h2>
                        <p class="text-muted mb-0">قم بتعديل بيانات التقرير وحفظ التغييرات</p>
                    </div>
                    <div class="d-flex gap-2">
                        <button type="button" class="btn btn-outline-secondary" onclick="window.history.back()">
                            <i class="fas fa-arrow-right me-2"></i>رجوع
                        </button>
                        <button type="button" class="btn btn-outline-info" onclick="previewReport()">
                            <i class="fas fa-eye me-2"></i>معاينة
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Form -->
        <div class="card border-0 shadow-sm mb-4" style="background: rgba(255, 255, 255, 0.95);">
            <div class="card-body p-4">
                <form id="editReportForm">
                    <!-- Form Step Indicator -->
                    <div class="row mb-5">
                        <div class="col-12">
                            <div class="position-relative" style="background: rgba(255,255,255,0.7); padding: 2rem 1.5rem; border-radius: var(--border-radius); box-shadow: 0 3px 15px rgba(0,0,0,0.03);">
                                <div class="justify-content-between align-items-center position-relative" style="z-index: 2;display: flex;">
                                    <!-- Step 1 -->
                                    <div class="step-item text-center active">
                                        <div class="step-circle-container position-relative d-inline-flex justify-content-center">
                                            <button type="button" class="step-button btn btn-primary position-relative" data-step="0" style="width: 50px; height: 50px; font-weight: 600; box-shadow: 0 4px 15px rgba(0, 117, 83, 0.25); border: none; z-index: 2; border-radius: 50% !important; display: flex; align-items: center; justify-content: center;">1</button>
                                        </div>
                                        <div class="step-title mt-2" style="font-weight: 500; font-size: 0.9rem;">معلومات عامة</div>
                                    </div>
                                    
                                    <!-- Step 2 -->
                                    <div class="step-item text-center">
                                        <div class="step-circle-container position-relative d-inline-flex justify-content-center">
                                            <button type="button" class="step-button btn btn-outline-primary position-relative" data-step="1" style="width: 50px; padding: 0; height: 50px; font-weight: 600; border-width: 2px; background-color: white; z-index: 2; border-radius: 50% !important; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease;">2</button>
                                        </div>
                                        <div class="step-title mt-2" style="font-weight: 500; font-size: 0.9rem;">الفحوصات التقنية</div>
                                    </div>
                                    
                                    <!-- Step 3 -->
                                    <div class="step-item text-center">
                                        <div class="step-circle-container position-relative d-inline-flex justify-content-center">
                                            <button type="button" class="step-button btn btn-outline-primary position-relative" data-step="2" style="width: 50px; height: 50px; font-weight: 600; border-width: 2px; background-color: white; z-index: 2; border-radius: 50% !important; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease;">3</button>
                                        </div>
                                        <div class="step-title mt-2" style="font-weight: 500; font-size: 0.9rem;">الفحص الخارجي</div>
                                    </div>
                                    
                                    <!-- Step 4 -->
                                    <div class="step-item text-center">
                                        <div class="step-circle-container position-relative d-inline-flex justify-content-center">
                                            <button type="button" class="step-button btn btn-outline-primary position-relative" data-step="3" style="width: 50px; height: 50px; font-weight: 600; border-width: 2px; background-color: white; z-index: 2; border-radius: 50% !important; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease;">4</button>
                                        </div>
                                        <div class="step-title mt-2" style="font-weight: 500; font-size: 0.9rem;">ملاحظات</div>
                                    </div>
                                    
                                    <!-- Step 5 -->
                                    <div class="step-item text-center">
                                        <div class="step-circle-container position-relative d-inline-flex justify-content-center">
                                            <button type="button" class="step-button btn btn-outline-primary position-relative" data-step="4" style="width: 50px; height: 50px; font-weight: 600; border-width: 2px; background-color: white; z-index: 2; border-radius: 50% !important; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease;">5</button>
                                        </div>
                                        <div class="step-title mt-2" style="font-weight: 500; font-size: 0.9rem;">الفاتورة</div>
                                    </div>
                                </div>
                                
                                <!-- Progress Bar -->
                                <div class="progress mt-4" style="height: 4px; background-color: rgba(0, 117, 83, 0.1);">
                                    <div class="progress-bar" role="progressbar" style="width: 20%; background: linear-gradient(90deg, var(--primary-color) 0%, var(--primary-hover) 100%);" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Global Navigation Buttons -->
                    <div class="row mt-4 mb-3">
                        <div class="col-12">
                            <div class="d-flex justify-content-between">
                                <button type="button" class="btn btn-outline-secondary" id="globalPrevBtn" style="display: none;">
                                    <i class="fas fa-arrow-right me-2"></i>السابق
                                </button>
                                <button type="button" class="btn btn-primary" id="globalNextBtn">
                                    التالي <i class="fas fa-arrow-left ms-2"></i>
                                </button>
                                <button type="submit" class="btn btn-success d-none" id="submitReportBtn">
                                    <i class="fas fa-save me-2"></i>حفظ التغييرات
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Form Steps -->
                    <!-- Step 1: General Information -->
                    <div class="form-step active" id="step1">
                        <div class="row">
                            <div class="col-12">
                                <h4 class="mb-4" style="color: var(--primary-color);">
                                    <i class="fas fa-info-circle me-2"></i>معلومات عامة
                                </h4>
                            </div>
                        </div>

                        <!-- Client Selection -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <div class="card client-card">
                                    <div class="card-header bg-light">
                                        <h6 class="mb-0">
                                            <i class="fas fa-user me-2"></i>اختيار العميل
                                        </h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-8">
                                                <div class="input-group">
                                                    <span class="input-group-text">
                                                        <i class="fas fa-search"></i>
                                                    </span>
                                                    <input type="text" class="form-control" id="clientSearchInput" placeholder="ابحث عن عميل بالاسم أو رقم الهاتف أو رقم الطلب...">
                                                    <button class="btn btn-outline-primary" type="button" data-bs-toggle="modal" data-bs-target="#addClientModal">
                                                        <i class="fas fa-plus me-1"></i>إضافة عميل
                                                    </button>
                                                </div>
                                                <div id="clientSearchResults" class="mt-2" style="display: none; max-height: 300px; overflow-y: auto; border: 1px solid #dee2e6; border-radius: 0.375rem; background: white;"></div>
                                            </div>
                                            <div class="col-md-4">
                                                <div id="selectedClientInfo" class="card bg-light" style="display: none;">
                                                    <div class="card-body p-3">
                                                        <h6 class="card-title mb-2">العميل المحدد</h6>
                                                        <p class="mb-1"><strong id="selectedClientName">-</strong></p>
                                                        <p class="mb-1 text-muted" id="selectedClientPhone">-</p>
                                                        <p class="mb-0 text-muted" id="selectedClientEmail">-</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Device Information -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-header bg-light">
                                        <h6 class="mb-0">
                                            <i class="fas fa-laptop me-2"></i>معلومات الجهاز
                                        </h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-6 mb-3">
                                                <label for="orderNumber" class="form-label">رقم الطلب <span class="text-danger">*</span></label>
                                                <input type="text" class="form-control" id="orderNumber" required>
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <label for="inspectionDate" class="form-label">تاريخ الفحص <span class="text-danger">*</span></label>
                                                <input type="date" class="form-control" id="inspectionDate" required>
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <label for="deviceModel" class="form-label">موديل الجهاز <span class="text-danger">*</span></label>
                                                <input type="text" class="form-control" id="deviceModel" required>
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <label for="serialNumber" class="form-label">الرقم التسلسلي</label>
                                                <input type="text" class="form-control" id="serialNumber">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Navigation -->
                        <div class="row">
                            <div class="col-12">
                                <div class="d-flex justify-content-end">
                                    <button type="button" class="btn btn-primary btn-next-step">
                                        التالي <i class="fas fa-arrow-left ms-2"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Technical Tests -->
                    <div class="form-step" id="step2" style="display: none;">
                        <div class="row">
                            <div class="col-12">
                                <h4 class="mb-4" style="color: var(--primary-color);">
                                    <i class="fas fa-cogs me-2"></i>الفحوصات التقنية
                                </h4>
                            </div>
                        </div>

                        <!-- Technical Tests Content will be loaded dynamically -->
                        <div id="technicalTestsContent">
                            <!-- Content will be populated by JavaScript -->
                        </div>

                        <!-- Navigation -->
                        <div class="row">
                            <div class="col-12">
                                <div class="d-flex justify-content-between">
                                    <button type="button" class="btn btn-outline-secondary btn-prev-step">
                                        <i class="fas fa-arrow-right me-2"></i>السابق
                                    </button>
                                    <button type="button" class="btn btn-primary btn-next-step">
                                        التالي <i class="fas fa-arrow-left ms-2"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3: External Inspection -->
                    <div class="form-step" id="step3" style="display: none;">
                        <div class="row">
                            <div class="col-12">
                                <h4 class="mb-4" style="color: var(--primary-color);">
                                    <i class="fas fa-camera me-2"></i>الفحص الخارجي
                                </h4>
                            </div>
                        </div>

                        <!-- External Inspection Content will be loaded dynamically -->
                        <div id="externalInspectionContent">
                            <!-- Content will be populated by JavaScript -->
                        </div>

                        <!-- Navigation -->
                        <div class="row">
                            <div class="col-12">
                                <div class="d-flex justify-content-between">
                                    <button type="button" class="btn btn-outline-secondary btn-prev-step">
                                        <i class="fas fa-arrow-right me-2"></i>السابق
                                    </button>
                                    <button type="button" class="btn btn-primary btn-next-step">
                                        التالي <i class="fas fa-arrow-left ms-2"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 4: Notes -->
                    <div class="form-step" id="step4" style="display: none;">
                        <div class="row">
                            <div class="col-12">
                                <h4 class="mb-4" style="color: var(--primary-color);">
                                    <i class="fas fa-sticky-note me-2"></i>ملاحظات
                                </h4>
                            </div>
                        </div>

                        <!-- Notes Content will be loaded dynamically -->
                        <div id="notesContent">
                            <!-- Content will be populated by JavaScript -->
                        </div>

                        <!-- Navigation -->
                        <div class="row">
                            <div class="col-12">
                                <div class="d-flex justify-content-between">
                                    <button type="button" class="btn btn-outline-secondary btn-prev-step">
                                        <i class="fas fa-arrow-right me-2"></i>السابق
                                    </button>
                                    <button type="button" class="btn btn-primary btn-next-step">
                                        التالي <i class="fas fa-arrow-left ms-2"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 5: Invoice -->
                    <div class="form-step" id="step5" style="display: none;">
                        <div class="row">
                            <div class="col-12">
                                <h4 class="mb-4" style="color: var(--primary-color);">
                                    <i class="fas fa-file-invoice me-2"></i>الفاتورة
                                </h4>
                            </div>
                        </div>

                        <!-- Invoice Content will be loaded dynamically -->
                        <div id="invoiceContent">
                            <!-- Content will be populated by JavaScript -->
                        </div>

                        <!-- Navigation -->
                        <div class="row">
                            <div class="col-12">
                                <div class="d-flex justify-content-between">
                                    <button type="button" class="btn btn-outline-secondary btn-prev-step">
                                        <i class="fas fa-arrow-right me-2"></i>السابق
                                    </button>
                                    <button type="submit" class="btn btn-success">
                                        <i class="fas fa-save me-2"></i>حفظ التغييرات
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Client Modal -->
    <div class="modal fade" id="addClientModal" tabindex="-1" aria-labelledby="addClientModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addClientModalLabel">
                        <i class="fas fa-user-plus me-2"></i>إضافة عميل جديد
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addClientForm">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="clientName" class="form-label">اسم العميل <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="clientName" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="clientPhone" class="form-label">رقم الهاتف <span class="text-danger">*</span></label>
                                <input type="tel" class="form-control" id="clientPhone" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="clientEmail" class="form-label">البريد الإلكتروني</label>
                                <input type="email" class="form-control" id="clientEmail">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="clientOrderCode" class="form-label">رقم الطلب <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="clientOrderCode" required>
                            </div>
                            <div class="col-12 mb-3">
                                <label for="clientAddress" class="form-label">العنوان</label>
                                <textarea class="form-control" id="clientAddress" rows="2"></textarea>
                            </div>
                            <div class="col-12 mb-3">
                                <label class="form-label">الحالة</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="clientStatus" id="clientStatusActive" value="active" checked>
                                    <label class="form-check-label" for="clientStatusActive">نشط</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="clientStatus" id="clientStatusInactive" value="inactive">
                                    <label class="form-check-label" for="clientStatusInactive">غير نشط</label>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إلغاء</button>
                    <button type="button" class="btn btn-primary" id="saveClientBtn">
                        <i class="fas fa-save me-2"></i>حفظ العميل
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal fade" id="reportUpdatedModal" tabindex="-1" aria-labelledby="reportUpdatedModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="reportUpdatedModalLabel">
                        <i class="fas fa-check-circle text-success me-2"></i>تم تحديث التقرير بنجاح!
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>تم تحديث التقرير بنجاح. يمكنك الآن:</p>
                    <div class="d-grid gap-2">
                        <button type="button" class="btn btn-primary" id="viewUpdatedReportBtn">
                            <i class="fas fa-eye me-2"></i>عرض التقرير المحدث
                        </button>
                        <button type="button" class="btn btn-outline-secondary" onclick="window.location.href='reports.html'">
                            <i class="fas fa-list me-2"></i>العودة إلى قائمة التقارير
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom Scripts -->
    <script src="js/header-component.js"></script>
    <script src="js/api-service.js"></script>
    <script src="js/auth-check.js"></script>
    <script src="js/form-steps-utils.js"></script>
    <script src="js/form-steps.js"></script>
    <script src="js/edit-report.js"></script>
</body>
</html> 